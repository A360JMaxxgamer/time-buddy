@inherits FluxorComponent
@inject IState<ProjectListState> State
@inject IDispatcher Dispatcher
@inject NavigationManager NavigationManager

<MudList Class="d-flex flex-column flex-grow-1 ma-5">
    @foreach (var project in State.Value.Projects)
    {
        <MudListItem OnClick="() => OpenProject(project.Id)">
            <MudCard>
                <MudCardHeader>@project.Name</MudCardHeader>
            </MudCard>
        </MudListItem>
    }
</MudList>

@code
{
    /// <inheritdoc />
    protected override void OnInitialized()
    {
        base.OnInitialized();
        Dispatcher.Dispatch(new FetchProjectsAction());
    }

    private void OpenProject(int id)
    {
        NavigationManager.NavigateTo($"/projects/{id}");
    }
}