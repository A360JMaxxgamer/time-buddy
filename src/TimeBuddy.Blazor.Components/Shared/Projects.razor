@inherits FluxorComponent
@inject IState<ProjectListState> State
@inject IDispatcher Dispatcher
@inject NavigationManager NavigationManager

<MudList Class="align-content-stretch">
    @foreach (var project in State.Value.Projects)
    {
        <MudListItem OnClick="() => OpenProject(project.Id)" >
            <MudCard Class="align-content-stretch">
                <MudCardHeader>@project.Name</MudCardHeader>
            </MudCard>
        </MudListItem>
    }
</MudList>

@code
{
    /// <inheritdoc />
    protected override void OnInitialized()
    {
        base.OnInitialized();
        Dispatcher.Dispatch(new FetchProjectsAction());
    }

    private void OpenProject(int id)
    {
        NavigationManager.NavigateTo($"/projects/{id}");
    }
}