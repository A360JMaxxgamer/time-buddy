@using Fluxor
@using TimeBuddy.Core.Store.ProjectListUseCase
@inherits FluxorComponent
@inject IState<ProjectListState> State
@inject IDispatcher Dispatcher
@inject NavigationManager NavigationManager

<MudList>
    @foreach (var project in State.Value.Projects)
    {
        <MudListItem OnClick="() => OpenProject(project.Id)">
            <MudCard>
                <MudCardHeader>@project.Name</MudCardHeader>
            </MudCard>
        </MudListItem>
    }
</MudList>

@code
{
    /// <inheritdoc />
    protected override void OnInitialized()
    {
        base.OnInitialized();
        Dispatcher.Dispatch(new FetchProjectsAction());
    }

    private void OpenProject(int id)
    {
        NavigationManager.NavigateTo($"/project/{id}");
    }
}
